{"version":3,"sources":["pages/users/AddUser.jsx","containers/wrapper/Wrapper.jsx","store/actions/users.jsx"],"names":["mapDispatchToProps","postUser","connect","withRouter","props","useState","isEmailValid","validateEmail","useForm","register","handleSubmit","errors","watch","useEffect","test","className","i18n","t","onSubmit","data","history","has-error","first_name","ref","required","name","placeholder","last_name","phone","type","Wrapper","children","getAllUsers","dispatch","a","axios","get","success","GET_ALL_USERS","code","IS_LOGGED_IN","localStorage","removeItem","defaults","headers","common","TOGGLE_ERROR_MODAL","message","Promise","reject","getUser","id","GET_SELECTED_USER","body","email","post","POST_USER","goBack","updateUser","put","UPDATE_USER","deleteUser","delete","window","location","reload"],"mappings":"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","file":"static/js/20.053b9e28.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './style.scss';\nimport Wrapper from '../../containers/wrapper/Wrapper';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport i18n from '../../services/locales/i18n';\nimport { postUser } from '../../store/actions/users';\nimport { useForm } from \"react-hook-form\";\n\nconst AddUser = (props) => {\n    const [isEmailValid, validateEmail] = useState(false);\n    const { register, handleSubmit, errors, watch } = useForm();\n    const onSubmit = data => {\n        if (isEmailValid) props.postUser(data, props.history);\n    }\n    useEffect(() => {\n        let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n        if (reg.test(watch('email')) === false) validateEmail(false);\n        else validateEmail(true);\n    }, [watch('email')]);\n    return (\n        <Wrapper>\n            <div className=\"strike-adduser\">\n                <div className=\"strike-adduser__title\">{i18n.t('users.addUser')}</div>\n                <form onSubmit={handleSubmit(onSubmit)} className=\"strike-adduser__form\">\n                    <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.firstName')}</div>\n                    <input has-error={errors.first_name ? 'true' : 'false'} ref={register({ required: true })} name=\"first_name\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.firstName')} />\n                    <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.lastName')}</div>\n                    <input has-error={errors.last_name ? 'true' : 'false'} ref={register({ required: true })} name=\"last_name\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.lastName')} />\n                    <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.email')}</div>\n                    <input has-error={!isEmailValid ? 'true' : 'false'} ref={register({ required: true })} name=\"email\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.email')} />\n                    <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.phone')}</div>\n                    <input has-error={errors.phone ? 'true' : 'false'} ref={register({ required: true })} name=\"phone\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.phone')} />\n                    {/* <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.isAdmin')}</div> */}\n                    {/* <select className=\"strike-adduser__form-input\">\n                        <option>{i18n.t('addUserForm.true')}</option>\n                        <option>{i18n.t('addUserForm.false')}</option>\n                    </select> */}\n                    <button type=\"submit\" className=\"strike-adduser__form-button\">{i18n.t('users.addUser')}</button>\n                </form>\n            </div>\n        </Wrapper>\n    )\n}\n\nconst mapStateToProps = null;\nconst mapDispatchToProps = { postUser };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(AddUser));","import React from 'react';\nimport './wrapper.scss';\n\nconst Wrapper = (props) => {\n    return (\n        <div className=\"strike-wrapper\">\n            {props.children}\n        </div>\n    )\n}\n\nexport default Wrapper;","import {\n    GET_ALL_USERS, GET_SELECTED_USER, POST_USER, UPDATE_USER, DELETE_USER, IS_LOGGED_IN, TOGGLE_ERROR_MODAL\n} from '../actionTypes';\nimport axios from 'axios';\n\nexport const getAllUsers = () => async (dispatch) => {\n    try {\n        const { data } = await axios.get(`/users`);\n        if (data.success) {\n            dispatch({ type: GET_ALL_USERS, data: data.data });\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const getUser = (id) => async (dispatch) => {\n    try {\n        const { data } = await axios.get(`/users/${id}`);\n        if (data.success) {\n            dispatch({ type: GET_SELECTED_USER, data: data.data });\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const postUser = (body, history) => async (dispatch) => {\n    try {\n        const { first_name, last_name, email, phone } = body;\n        const { data } = await axios.post(`/users`, { first_name, last_name, email, phone });\n        if (data.success) {\n            dispatch({ type: POST_USER, data: data.data });\n            history.goBack();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const updateUser = (id, body, history) => async (dispatch) => {\n    try {\n        const { first_name, last_name, email, phone } = body;\n        const { data } = await axios.put(`/users/${id}`, { first_name, last_name, email, phone });\n        if (data.success) {\n            dispatch({ type: UPDATE_USER, data: data.data });\n            history.goBack();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const deleteUser = (id) => async (dispatch) => {\n    try {\n        const { data } = await axios.delete(`/users/${id}`);\n        if (data.success) {\n            window.location.reload();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}"],"sourceRoot":""}