{"version":3,"sources":["pages/profile/Profile.jsx","containers/wrapper/Wrapper.jsx","store/actions/users.jsx"],"names":["timeout","mapDispatchToProps","getUser","updateUser","resetPassword","connect","user","props","useState","isEmailValid","validateEmail","name","setName","surname","setSurname","email","setEmail","phone","setPhone","useForm","register","handleSubmit","errors","watch","useEffect","first_name","last_name","className","i18n","t","onSubmit","id","history","disabled","defaultValue","has-error","ref","required","placeholder","onChange","e","window","onkeyup","clearTimeout","setTimeout","a","test","target","value","old_password","new_password","new_password_confirmation","type","Wrapper","children","getAllUsers","dispatch","axios","get","data","success","GET_ALL_USERS","code","IS_LOGGED_IN","localStorage","removeItem","defaults","headers","common","TOGGLE_ERROR_MODAL","message","response","status","LOG_OUT","CLEAR_NOTIFICATION","clear","Promise","reject","GET_SELECTED_USER","postUser","body","post","POST_USER","goBack","put","UPDATE_USER","deleteUser","delete","location","reload"],"mappings":"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","file":"static/js/19.8e8f471e.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Wrapper from '../../containers/wrapper/Wrapper';\nimport { connect } from 'react-redux';\nimport { useForm } from \"react-hook-form\";\nimport i18n from '../../services/locales/i18n';\nimport { getUser, resetPassword } from '../../store/actions/authorization';\nimport { updateUser } from '../../store/actions/users';\nimport './style.scss';\n\nvar timeout = null;\nconst Profile = (props) => {\n    const [isEmailValid, validateEmail] = useState(true);\n    const [name, setName] = useState('');\n    const [surname, setSurname] = useState('');\n    const [email, setEmail] = useState('');\n    const [phone, setPhone] = useState('');\n\n    const { register, handleSubmit, errors, watch } = useForm();\n    const onSubmit = ({ first_name, last_name, email, phone }) => {\n        if (isEmailValid) {\n            props.updateUser(props.user.id, { first_name, last_name, email, phone }, props.history)\n        }\n    };\n    const changePassword = ({ old_password, new_password, new_password_confirmation }) => {\n        props.resetPassword({ old_password, new_password, new_password_confirmation })\n    };\n\n    useEffect(() => { props.getUser() }, []);\n    useEffect(() => {\n        if (props.user) {\n            setName(props.user.first_name);\n            setSurname(props.user.last_name);\n            setEmail(props.user.email);\n            setPhone(props.user.phone);\n        }\n    }, [props.user]);\n\n    const handleEmail = (e) => {\n        window.onkeyup = (e) => {\n            clearTimeout(timeout);\n            timeout = setTimeout(async () => {\n                let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n                if (reg.test(e.target.value) === false) validateEmail(false);\n                else validateEmail(true);\n            }, 500)\n        }\n    }\n\n    return (\n        <Wrapper>\n            <div className=\"strike-profile\">\n                <div className=\"strike-profile__title\">{i18n.t('profile.title')}</div>\n                <form className=\"strike-profile__form\" onSubmit={handleSubmit(onSubmit)}>\n                    <div className=\"strike-profile__form-label\">{i18n.t('profile.name')}</div>\n                    <input disabled defaultValue={name} has-error={errors.first_name ? 'true' : 'false'} name=\"first_name\" ref={register({ required: true })} className=\"strike-profile__form-input\" placeholder={i18n.t('profile.name')} />\n                    <div className=\"strike-profile__form-label\">{i18n.t('profile.surname')}</div>\n                    <input disabled defaultValue={surname} has-error={errors.last_name ? 'true' : 'false'} name=\"last_name\" ref={register({ required: true })} className=\"strike-profile__form-input\" placeholder={i18n.t('profile.surname')} />\n                    <div className=\"strike-profile__form-label\">{i18n.t('profile.email')}</div>\n                    <input disabled onChange={handleEmail} defaultValue={email} has-error={!isEmailValid ? 'true' : 'false'} name=\"email\" ref={register({ required: true })} className=\"strike-profile__form-input\" placeholder={i18n.t('profile.email')} />\n                    <div className=\"strike-profile__form-label\">{i18n.t('profile.phone')}</div>\n                    <input disabled defaultValue={phone} has-error={errors.phone ? 'true' : 'false'} name=\"phone\" ref={register({ required: true })} className=\"strike-profile__form-input\" placeholder={i18n.t('profile.phone')} />\n                </form>\n            </div>\n            <div className=\"strike-profile\">\n                <div className=\"strike-profile__title\">{i18n.t('profile.changePass')}</div>\n                <form className=\"strike-profile__form\" onSubmit={handleSubmit(changePassword)}>\n                    <div className=\"strike-profile__form-label\">{i18n.t('profile.oldPassword')}</div>\n                    <input type=\"password\" has-error={errors.old_password ? 'true' : 'false'} name=\"old_password\" ref={register({ required: true })} className=\"strike-profile__form-input\" placeholder={i18n.t('profile.oldPassword')} />\n                    <div className=\"strike-profile__form-label\">{i18n.t('profile.newPassword')}</div>\n                    <input type=\"password\" has-error={errors.new_password ? 'true' : 'false'} name=\"new_password\" ref={register({ required: true })} className=\"strike-profile__form-input\" placeholder={i18n.t('profile.newPassword')} />\n                    <div className=\"strike-profile__form-label\">{i18n.t('profile.confirmNewPassword')}</div>\n                    <input type=\"password\" has-error={errors.new_password_confirmation ? 'true' : 'false'} name=\"new_password_confirmation\" ref={register({ required: true })} className=\"strike-profile__form-input\" placeholder={i18n.t('profile.confirmNewPassword')} />\n                    <button type=\"submit\" className=\"strike-profile__form-button\">{i18n.t('profile.changePass')}</button>\n                </form>\n            </div>\n        </Wrapper>\n    )\n}\n\nconst mapStateToProps = ({ user }) => ({ user });\nconst mapDispatchToProps = { getUser, updateUser, resetPassword };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);","import React from 'react';\nimport './wrapper.scss';\n\nconst Wrapper = (props) => {\n    return (\n        <div className=\"strike-wrapper\">\n            {props.children}\n        </div>\n    )\n}\n\nexport default Wrapper;","import {\n    GET_ALL_USERS, GET_SELECTED_USER, POST_USER, UPDATE_USER, DELETE_USER, IS_LOGGED_IN, TOGGLE_ERROR_MODAL, LOG_OUT, CLEAR_NOTIFICATION\n} from '../actionTypes';\nimport axios from 'axios';\n\nexport const getAllUsers = () => async (dispatch) => {\n    try {\n        const { data } = await axios.get(`/users`);\n        if (data.success) {\n            dispatch({ type: GET_ALL_USERS, data: data.data });\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        if (e.response.status === 401) {\n            dispatch({ type: LOG_OUT });\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            dispatch({ type: CLEAR_NOTIFICATION })\n            localStorage.clear();\n        }\n        return Promise.reject(e);\n    }\n}\n\nexport const getUser = (id) => async (dispatch) => {\n    try {\n        const { data } = await axios.get(`/users/${id}`);\n        if (data.success) {\n            dispatch({ type: GET_SELECTED_USER, data: data.data });\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        if (e.response.status === 401) {\n            dispatch({ type: LOG_OUT });\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            dispatch({ type: CLEAR_NOTIFICATION })\n            localStorage.clear();\n        }\n        return Promise.reject(e);\n    }\n}\n\nexport const postUser = (body, history) => async (dispatch) => {\n    try {\n        const { first_name, last_name, email, phone } = body;\n        const { data } = await axios.post(`/users`, { first_name, last_name, email, phone });\n        if (data.success) {\n            dispatch({ type: POST_USER, data: data.data });\n            history.goBack();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data })\n        }\n    } catch (e) {\n        if (e.response.status === 401) {\n            dispatch({ type: LOG_OUT });\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            dispatch({ type: CLEAR_NOTIFICATION })\n            localStorage.clear();\n        }\n        return Promise.reject(e);\n    }\n}\n\nexport const updateUser = (id, body, history) => async (dispatch) => {\n    try {\n        const { first_name, last_name, email, phone } = body;\n        const { data } = await axios.put(`/users/${id}`, { first_name, last_name, email, phone });\n        if (data.success) {\n            dispatch({ type: UPDATE_USER, data: data.data });\n            history.goBack();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        if (e.response.status === 401) {\n            dispatch({ type: LOG_OUT });\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            dispatch({ type: CLEAR_NOTIFICATION })\n            localStorage.clear();\n        }\n        return Promise.reject(e);\n    }\n}\n\nexport const deleteUser = (id) => async (dispatch) => {\n    try {\n        const { data } = await axios.delete(`/users/${id}`);\n        if (data.success) {\n            window.location.reload();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        if (e.response.status === 401) {\n            dispatch({ type: LOG_OUT });\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            dispatch({ type: CLEAR_NOTIFICATION })\n            localStorage.clear();\n        }\n        return Promise.reject(e);\n    }\n}"],"sourceRoot":""}