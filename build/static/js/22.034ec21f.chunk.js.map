{"version":3,"sources":["containers/wrapper/Wrapper.jsx","store/actions/users.jsx","pages/users/EditUser.jsx"],"names":["Wrapper","props","className","children","getAllUsers","dispatch","a","axios","get","data","success","type","GET_ALL_USERS","code","IS_LOGGED_IN","localStorage","removeItem","defaults","headers","common","TOGGLE_ERROR_MODAL","message","response","status","LOG_OUT","CLEAR_NOTIFICATION","clear","Promise","reject","getUser","id","GET_SELECTED_USER","postUser","body","history","first_name","last_name","email","phone","post","POST_USER","goBack","updateUser","put","UPDATE_USER","deleteUser","delete","window","location","reload","mapDispatchToProps","connect","selectedUser","withRouter","useState","isEmailValid","validateEmail","setData","useForm","register","handleSubmit","errors","watch","useEffect","state","i18n","t","onSubmit","dataa","defaultValue","has-error","ref","required","name","placeholder","onChange","e","test","target","value","onClick"],"mappings":"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","file":"static/js/22.034ec21f.chunk.js","sourcesContent":["import React from 'react';\r\nimport './wrapper.scss';\r\n\r\nconst Wrapper = (props) => {\r\n    return (\r\n        <div className=\"strike-wrapper\">\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Wrapper;","import {\r\n    GET_ALL_USERS, GET_SELECTED_USER, POST_USER, UPDATE_USER, DELETE_USER, IS_LOGGED_IN, TOGGLE_ERROR_MODAL, LOG_OUT, CLEAR_NOTIFICATION\r\n} from '../actionTypes';\r\nimport axios from 'axios';\r\n\r\nexport const getAllUsers = () => async (dispatch) => {\r\n    try {\r\n        const { data } = await axios.get(`/users`);\r\n        if (data.success) {\r\n            dispatch({ type: GET_ALL_USERS, data: data.data });\r\n        } else if (data.code === 403) {\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            localStorage.removeItem('token');\r\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\r\n            axios.defaults.headers.common['Authorization'] = ``\r\n        }else{\r\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\r\n        }\r\n    } catch (e) {\r\n        if (e?.response?.status === 401) {\r\n            dispatch({ type: LOG_OUT });\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            dispatch({ type: CLEAR_NOTIFICATION })\r\n            localStorage.clear();\r\n        }\r\n        return Promise.reject(e);\r\n    }\r\n}\r\n\r\nexport const getUser = (id) => async (dispatch) => {\r\n    try {\r\n        const { data } = await axios.get(`/users/${id}`);\r\n        if (data.success) {\r\n            dispatch({ type: GET_SELECTED_USER, data: data.data });\r\n        } else if (data.code === 403) {\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            localStorage.removeItem('token');\r\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\r\n            axios.defaults.headers.common['Authorization'] = ``\r\n        }else{\r\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\r\n        }\r\n    } catch (e) {\r\n        if (e?.response?.status === 401) {\r\n            dispatch({ type: LOG_OUT });\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            dispatch({ type: CLEAR_NOTIFICATION })\r\n            localStorage.clear();\r\n        }\r\n        return Promise.reject(e);\r\n    }\r\n}\r\n\r\nexport const postUser = (body, history) => async (dispatch) => {\r\n    try {\r\n        const { first_name, last_name, email, phone } = body;\r\n        const { data } = await axios.post(`/users`, { first_name, last_name, email, phone });\r\n        if (data.success) {\r\n            dispatch({ type: POST_USER, data: data.data });\r\n            history.goBack();\r\n        } else if (data.code === 403) {\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            localStorage.removeItem('token');\r\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\r\n            axios.defaults.headers.common['Authorization'] = ``\r\n        }else{\r\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data })\r\n        }\r\n    } catch (e) {\r\n        if (e?.response?.status === 401) {\r\n            dispatch({ type: LOG_OUT });\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            dispatch({ type: CLEAR_NOTIFICATION })\r\n            localStorage.clear();\r\n        }\r\n        return Promise.reject(e);\r\n    }\r\n}\r\n\r\nexport const updateUser = (id, body, history) => async (dispatch) => {\r\n    try {\r\n        const { first_name, last_name, email, phone } = body;\r\n        const { data } = await axios.put(`/users/${id}`, { first_name, last_name, email, phone });\r\n        if (data.success) {\r\n            dispatch({ type: UPDATE_USER, data: data.data });\r\n            history.goBack();\r\n        } else if (data.code === 403) {\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            localStorage.removeItem('token');\r\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\r\n            axios.defaults.headers.common['Authorization'] = ``\r\n        }else{\r\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\r\n        }\r\n    } catch (e) {\r\n        if (e?.response?.status === 401) {\r\n            dispatch({ type: LOG_OUT });\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            dispatch({ type: CLEAR_NOTIFICATION })\r\n            localStorage.clear();\r\n        }\r\n        return Promise.reject(e);\r\n    }\r\n}\r\n\r\nexport const deleteUser = (id) => async (dispatch) => {\r\n    try {\r\n        const { data } = await axios.delete(`/users/${id}`);\r\n        if (data.success) {\r\n            window.location.reload();\r\n        } else if (data.code === 403) {\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            localStorage.removeItem('token');\r\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\r\n            axios.defaults.headers.common['Authorization'] = ``\r\n        }else{\r\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\r\n        }\r\n    } catch (e) {\r\n        if (e?.response?.status === 401) {\r\n            dispatch({ type: LOG_OUT });\r\n            dispatch({ type: IS_LOGGED_IN, data: false });\r\n            dispatch({ type: CLEAR_NOTIFICATION })\r\n            localStorage.clear();\r\n        }\r\n        return Promise.reject(e);\r\n    }\r\n}","import React, { useState, useEffect, isValidElement } from 'react';\r\nimport Wrapper from '../../containers/wrapper/Wrapper';\r\nimport i18n from '../../services/locales/i18n';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { updateUser, getUser, deleteUser } from '../../store/actions/users';\r\nimport { useForm } from \"react-hook-form\";\r\nimport './style.scss';\r\n\r\nvar timeout = null;\r\nconst EditUser = (props) => {\r\n    const [isEmailValid, validateEmail] = useState(true);\r\n    const [data, setData] = useState([])\r\n    const { register, handleSubmit, watch, errors } = useForm();\r\n    const onSubmit = dataa => {\r\n        if (isEmailValid) props.updateUser(props.location.state.id, dataa, props.history);\r\n    }\r\n\r\n    useEffect(() => { props.getUser(props.location.state.id); }, []);\r\n    useEffect(() => { setData(props.selectedUser) }, [props.selectedUser]);\r\n    const delUser = () => {\r\n        deleteUser(props.location.state.id);\r\n        props.history.goBack();\r\n    }\r\n\r\n    const handleEmail = (e) => {\r\n        let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n        if (reg.test(e.target.value) === false) validateEmail(false);\r\n        else validateEmail(true);\r\n        // window.onkeyup = (e) => {\r\n        //     clearTimeout(timeout);\r\n        //     timeout = setTimeout(async () => {\r\n        //         let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n        //         if (reg.test(e.target.value) === false) validateEmail(false);\r\n        //         else validateEmail(true);\r\n        //     }, 200)\r\n        // }\r\n    }\r\n    return (\r\n        <Wrapper>\r\n            <div className=\"strike-adduser\">\r\n                <div className=\"strike-adduser__title\">{i18n.t('users.editUser')}</div>\r\n                <div className=\"strike-adduser__form\">\r\n                    <form onSubmit={handleSubmit(onSubmit)}>\r\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.firstName')}</div>\r\n                        <input defaultValue={data?.first_name} has-error={errors.first_name ? 'true' : 'false'} ref={register({ required: true })} name=\"first_name\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.firstName')} />\r\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.lastName')}</div>\r\n                        <input defaultValue={data?.last_name} has-error={errors.last_name ? 'true' : 'false'} ref={register({ required: true })} name=\"last_name\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.lastName')} />\r\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.email')}</div>\r\n                        <input onChange={handleEmail} defaultValue={data && data.email} has-error={!isEmailValid ? 'true' : 'false'} ref={register({ required: true })} name=\"email\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.email')} />\r\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.phone')}</div>\r\n                        <input defaultValue={data?.phone} has-error={errors.phone ? 'true' : 'false'} ref={register({ required: true })} name=\"phone\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.phone')} />\r\n                        {/* <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.isAdmin')}</div> */}\r\n                        {/* <select className=\"strike-adduser__form-input\">\r\n                        <option>{i18n.t('addUserForm.true')}</option>\r\n                        <option>{i18n.t('addUserForm.false')}</option>\r\n                    </select> */}\r\n                        <button type=\"submit\" className=\"strike-adduser__form-button\">{i18n.t('users.editUser')}</button>\r\n                    </form>\r\n                    <button onClick={delUser} className=\"strike-adduser__form-button\">{i18n.t('users.delete')}</button>\r\n                </div>\r\n            </div>\r\n        </Wrapper>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ selectedUser }) => ({ selectedUser });\r\nconst mapDispatchToProps = { updateUser, getUser, deleteUser };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(EditUser));"],"sourceRoot":""}