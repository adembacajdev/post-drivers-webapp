(this.webpackJsonpstrikeapp=this.webpackJsonpstrikeapp||[]).push([[17],{1156:function(e,t,a){"use strict";a.r(t);var r=a(16),c=a(0),n=a.n(c),s=a(8),o=a(204),u=a(216),i=a(32),l=a(5),d=(a(246),a(237)),p=a(225),m=Object(c.createContext)(null),f=a(256),b=(a(70),a(490)),h=a.n(b),k=a(595),v=(a(491),function(e){var t=e.item,a=e.deleteProduct,s=window.location.host,u=Object(c.useContext)(m),d=u.selected,p=u.setSelected,b=(u.selectedAll,Object(o.e)()),v=i.a.products.threePoints,_=Object(c.useState)("".concat(s,"/add-order/").concat(t.id)),y=Object(r.a)(_,2),g=y[0],j=(y[1],Object(c.useState)(t.checked)),E=Object(r.a)(j,2),x=E[0],P=E[1],N=Object(c.useState)(!1),O=Object(r.a)(N,2),w=O[0],C=O[1],S=Object(c.useCallback)((function(){C(!w)}),[w]),A=Object(c.useCallback)((function(){b.push("/edit-product",{id:t.id})}),[]),I=Object(c.useCallback)((function(){a(t.id)}),[]);return Object(c.useEffect)((function(){if(x)p([].concat(Object(f.a)(d),[t.id]));else if(!x){var e=d.filter((function(e){return e!==t.id}));p(e)}}),[x]),Object(c.useEffect)((function(){0===d.filter((function(e){return e===t.id})).length?P(!1):P(!0)}),[d]),n.a.createElement("div",{className:"strike-products__table-item"},n.a.createElement("div",{className:"strike-products__table-item-content flex-1"},n.a.createElement("input",{type:"checkbox",onChange:function(){return P(!x)},value:x,checked:x})),n.a.createElement("div",{onClick:A,className:"strike-products__table-item-content flex-1"},n.a.createElement("div",{className:"strike-products__table-item-content-text"},t.id)),n.a.createElement("div",{onClick:A,className:"strike-products__table-item-content flex-3"},n.a.createElement("div",{className:"strike-products__table-item-content-text ml-15"},t.name)),n.a.createElement("div",{onClick:A,"is-responsive":"true",className:"strike-products__table-item-content flex-3"},n.a.createElement("div",{className:"strike-products__table-item-content-text"},t.description)),n.a.createElement("div",{onClick:A,className:"strike-products__table-item-content flex-15"},n.a.createElement("div",{className:"strike-products__table-item-content-text"},"".concat(t.ks_price,"\u20ac"))),n.a.createElement("div",{"is-responsive":"true",onClick:S,className:"strike-products__table-item-content flex-15 text-center"},n.a.createElement("div",{className:"dropdown"},n.a.createElement("img",{className:"strike-products__table-item-content-points",src:v}),n.a.createElement("div",{id:"dropdown-content",className:"dropdown-content"},n.a.createElement("div",{onClick:function(){k.a.notify("Link copied!",{position:"bottom-right"}),h()(g)},className:"dropdown-content-text"},l.a.t("products.copyLink")),n.a.createElement("div",{onClick:A,className:"dropdown-content-text"},l.a.t("products.edit")),n.a.createElement("div",{onClick:function(){return b.push("/add-order-by-shop",{id:t.id})},className:"dropdown-content-text"},l.a.t("products.addOrder")),n.a.createElement("div",{onClick:I,className:"dropdown-content-text"},l.a.t("products.delete"))))))}),_=function(e){var t=e.items,a=e.deleteProduct,r=Object(c.useContext)(m),s=r.selectedAll,o=r.selectAll,u=Object(c.useCallback)((function(){o(!s)}),[s]);return n.a.createElement("div",{className:"strike-products__table"},n.a.createElement("div",{className:"strike-products__table-header"},n.a.createElement("div",{className:"strike-products__table-header-item flex-1"},n.a.createElement("input",{type:"checkbox",onChange:u,value:s,checked:s})),n.a.createElement("div",{className:"strike-products__table-header-item flex-1"},l.a.t("products.id")),n.a.createElement("div",{className:"strike-products__table-header-item flex-3"},l.a.t("products.product")),n.a.createElement("div",{"is-responsive":"true",className:"strike-products__table-header-item flex-3"},l.a.t("products.description")),n.a.createElement("div",{className:"strike-products__table-header-item flex-15"},l.a.t("products.price")),n.a.createElement("div",{"is-responsive":"true",className:"strike-products__table-header-item flex-15 text-center"},l.a.t("products.actions"))),t&&t.map((function(e,t){return n.a.createElement(v,{key:t,item:e,deleteProduct:a})})))},y={getAllProducts:d.c,deleteProduct:d.a,searchProducts:d.f,deleteProducts:d.b};t.default=Object(s.b)((function(e){return{allProducts:e.allProducts,deletedProduct:e.deletedProduct}}),y)(Object(o.g)((function(e){var t=i.a.customers,a=t.filledLeftArrow,s=t.unfilledLeftArrow,o=t.filledRightArrow,d=t.unfilledRightArrow,f=Object(c.useState)(e.allProducts),b=Object(r.a)(f,2),h=b[0],k=b[1],v=Object(c.useState)([]),y=Object(r.a)(v,2),g=y[0],j=y[1],E=Object(c.useState)(!1),x=Object(r.a)(E,2),P=x[0],N=x[1],O=Object(p.a)(),w=O.register,C=O.handleSubmit;O.errors;Object(c.useEffect)((function(){e.getAllProducts(10,1)}),[]),Object(c.useEffect)((function(){e.deletedProduct&&window.location.reload()}),[e.deletedProduct]),Object(c.useEffect)((function(){k(e.allProducts),N(!1),j([])}),[e.allProducts]),Object(c.useEffect)((function(){if(P){var e=[];h.data.forEach((function(t){e.push(t.id)})),j(e)}else j([])}),[P]);var S=Object(c.useCallback)((function(){h.hasNextPage&&e.getAllProducts(10,h.currentPage+1)}),[h]),A=Object(c.useCallback)((function(){h.hasPrevPage&&e.getAllProducts(10,h.currentPage-1)}),[h]),I=Object(c.useCallback)((function(t){e.getAllProducts(10,t)}),[h]),z=Object(c.useCallback)((function(){e.history.push("/add-product")}),[]);return n.a.createElement(m.Provider,{value:{selected:g,setSelected:j,selectedAll:P,selectAll:N}},n.a.createElement(u.a,null,n.a.createElement("div",{className:"strike-products"},n.a.createElement("div",{className:"strike-products__header"},n.a.createElement("div",{className:"strike-products__header-left"},n.a.createElement("div",{className:"strike-products__header-left-title"},l.a.t("products.products"))),n.a.createElement("div",{className:"strike-products__header-right"},n.a.createElement("div",{onClick:z,className:"strike-products__header-right-text"},l.a.t("products.addProduct")))),n.a.createElement("form",{onSubmit:C((function(t){var a=t.search;e.searchProducts(a)})),className:"strike-products__search"},n.a.createElement("input",{name:"search",ref:w({required:!0}),placeholder:l.a.t("products.searchPlaceholder"),className:"strike-products__search-input"}),n.a.createElement("button",{type:"submit",className:"strike-products__search-button"},l.a.t("products.search"))),n.a.createElement(_,{items:h.data,deleteProduct:e.deleteProduct}),n.a.createElement("div",{className:"strike-products__pagination"},n.a.createElement("img",{onClick:A,src:h.hasPrevPage?a:s,className:"strike-products__pagination-leftarrow"}),h&&h.lastPage.map((function(e){return n.a.createElement("div",{onClick:function(){return I(e)},"is-active":e===h.currentPage?"true":"false",key:e,className:"strike-products__pagination-number"},e)})),n.a.createElement("img",{onClick:S,src:h.hasNextPage?o:d,className:"strike-products__pagination-rightarrow"})),n.a.createElement("button",{onClick:function(){e.deleteProducts(g),N(!1),j([])},disabled:!g.length,className:"strike-products__delete-selected"},l.a.t("products.deleteProducts")))))})))},216:function(e,t,a){"use strict";var r=a(0),c=a.n(r);a(217);t.a=function(e){return c.a.createElement("div",{className:"strike-wrapper"},e.children)}},217:function(e,t,a){},237:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return b}));var r=a(15),c=a.n(r),n=a(24),s=a(1),o=a(10),u=a.n(o),i=function(e,t){return function(){var a=Object(n.a)(c.a.mark((function a(r){var n;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.get("/products/paginate/".concat(e,"?page=").concat(t));case 3:200===(n=a.sent).status?r({type:s.j,data:n.data}):403===n.code?(r({type:s.I,data:!1}),localStorage.removeItem("token"),u.a.defaults.headers.common["Content-Type"]="applicaton/json",u.a.defaults.headers.common.Authorization=""):r({type:s.cb,data:n.message}),a.next=11;break;case 7:return a.prev=7,a.t0=a.catch(0),401===a.t0.response.status&&(r({type:s.K}),r({type:s.I,data:!1}),r({type:s.a}),localStorage.clear()),a.abrupt("return",Promise.reject(a.t0));case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(a){var r,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("/products/search?name=".concat(e));case 3:r=t.sent,(n=r.data).success?a({type:s.X,data:n.data}):403===n.code?(a({type:s.I,data:!1}),localStorage.removeItem("token"),u.a.defaults.headers.common["Content-Type"]="applicaton/json",u.a.defaults.headers.common.Authorization=""):a({type:s.cb,data:n.message}),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),401===t.t0.response.status&&(a({type:s.K}),a({type:s.I,data:!1}),a({type:s.a}),localStorage.clear()),t.abrupt("return",Promise.reject(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(a){var r,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get("/products/".concat(e));case 3:r=t.sent,(n=r.data).success?a({type:s.x,data:n.data}):403===n.code?(a({type:s.I,data:!1}),localStorage.removeItem("token"),u.a.defaults.headers.common["Content-Type"]="applicaton/json",u.a.defaults.headers.common.Authorization=""):a({type:s.x,data:{error:n.error}}),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),401===t.t0.response.status&&(a({type:s.K}),a({type:s.I,data:!1}),a({type:s.a}),localStorage.clear()),t.abrupt("return",Promise.reject(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(a){var r,n,o,i,l,d,p,m,f,b,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("body",e),t.prev=1,r=e.name,n=e.description,o=e.size,i=e.ks_price,l=e.al_price,d=e.mk_price,p=e.openable,m=e.history,f=JSON.parse(p),t.next=6,u.a.post("/products",{name:r,description:n,size:o,ks_price:i,al_price:l,mk_price:d,openable:f});case 6:b=t.sent,(h=b.data).success?m.goBack():403===h.code?(a({type:s.I,data:!1}),localStorage.removeItem("token"),u.a.defaults.headers.common["Content-Type"]="applicaton/json",u.a.defaults.headers.common.Authorization=""):a({type:s.cb,data:h.message}),t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(1),401===t.t0.response.status&&(a({type:s.K}),a({type:s.I,data:!1}),a({type:s.a}),localStorage.clear()),t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(a){var r,n,o,i,l,d,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.name,n=e.description,o=e.size,i=e.id,l=e.history,t.next=4,u.a.put("/products/".concat(i),{name:r,description:n,size:o});case 4:d=t.sent,(p=d.data).success?(a({type:s.fb,data:p}),l.goBack()):403===p.code?(a({type:s.I,data:!1}),localStorage.removeItem("token"),u.a.defaults.headers.common["Content-Type"]="applicaton/json",u.a.defaults.headers.common.Authorization=""):a({type:s.cb,data:p.message}),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),401===t.t0.response.status&&(a({type:s.K}),a({type:s.I,data:!1}),a({type:s.a}),localStorage.clear()),t.abrupt("return",Promise.reject(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(a){var r,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.delete("/products/".concat(e));case 3:r=t.sent,(n=r.data).success?window.location.reload():403===n.code?(a({type:s.I,data:!1}),localStorage.removeItem("token"),u.a.defaults.headers.common["Content-Type"]="applicaton/json",u.a.defaults.headers.common.Authorization=""):a({type:s.cb,data:n.error}),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),401===t.t0.response.status&&(a({type:s.K}),a({type:s.I,data:!1}),a({type:s.a}),localStorage.clear()),t.abrupt("return",Promise.reject(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(a){var r,n,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="",e.forEach((function(e){r=""===r?"product_ids[]=".concat(e):"".concat(r,"&product_ids[]=").concat(e)})),t.next=5,u.a.delete("/products?".concat(r));case 5:n=t.sent,(o=n.data).success?window.location.reload():403===o.code?(a({type:s.I,data:!1}),localStorage.removeItem("token"),u.a.defaults.headers.common["Content-Type"]="applicaton/json",u.a.defaults.headers.common.Authorization=""):a({type:s.cb,data:o.message}),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),401===t.t0.response.status&&(a({type:s.K}),a({type:s.I,data:!1}),a({type:s.a}),localStorage.clear()),t.abrupt("return",Promise.reject(t.t0));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}},246:function(e,t,a){}}]);
//# sourceMappingURL=17.a43760ba.chunk.js.map