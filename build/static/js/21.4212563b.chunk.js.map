{"version":3,"sources":["pages/users/EditUser.jsx","containers/wrapper/Wrapper.jsx","store/actions/users.jsx"],"names":["mapDispatchToProps","updateUser","getUser","deleteUser","connect","selectedUser","withRouter","props","useState","isEmailValid","validateEmail","data","setData","useForm","register","handleSubmit","watch","errors","useEffect","location","state","id","test","className","i18n","t","onSubmit","history","defaultValue","first_name","has-error","ref","required","name","placeholder","last_name","email","phone","type","onClick","goBack","Wrapper","children","getAllUsers","dispatch","a","axios","get","success","GET_ALL_USERS","code","IS_LOGGED_IN","localStorage","removeItem","defaults","headers","common","TOGGLE_ERROR_MODAL","message","Promise","reject","GET_SELECTED_USER","postUser","body","post","POST_USER","put","UPDATE_USER","delete","window","reload"],"mappings":"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","file":"static/js/21.4212563b.chunk.js","sourcesContent":["import React, { useState, useEffect, isValidElement } from 'react';\nimport Wrapper from '../../containers/wrapper/Wrapper';\nimport i18n from '../../services/locales/i18n';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { updateUser, getUser, deleteUser } from '../../store/actions/users';\nimport { useForm } from \"react-hook-form\";\nimport './style.scss';\n\nconst EditUser = (props) => {\n    const [isEmailValid, validateEmail] = useState(false);\n    const [data, setData] = useState(props.selectedUser)\n    const { register, handleSubmit, watch, errors } = useForm();\n    const onSubmit = data => {\n        if (isEmailValid) props.updateUser(props.location.state.id, data, props.history);\n    }\n\n    useEffect(() => { props.getUser(props.location.state.id); }, []);\n    useEffect(() => { setData(props.selectedUser) }, [props.selectedUser]);\n    const delUser = () => {\n        deleteUser(props.location.state.id);\n        props.history.goBack();\n    }\n\n    useEffect(() => {\n        let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n        if (reg.test(watch('email')) === false) validateEmail(false);\n        else validateEmail(true);\n    }, [watch('email'), data])\n    return (\n        <Wrapper>\n            <div className=\"strike-adduser\">\n                <div className=\"strike-adduser__title\">{i18n.t('users.editUser')}</div>\n                <div className=\"strike-adduser__form\">\n                    <form onSubmit={handleSubmit(onSubmit)}>\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.firstName')}</div>\n                        <input defaultValue={data && data.first_name} has-error={errors.first_name ? 'true' : 'false'} ref={register({ required: true })} name=\"first_name\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.firstName')} />\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.lastName')}</div>\n                        <input defaultValue={data && data.last_name} has-error={errors.last_name ? 'true' : 'false'} ref={register({ required: true })} name=\"last_name\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.lastName')} />\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.email')}</div>\n                        <input defaultValue={data && data.email} has-error={!isEmailValid ? 'true' : 'false'} ref={register({ required: true })} name=\"email\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.email')} />\n                        <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.phone')}</div>\n                        <input defaultValue={data && data.phone} has-error={errors.phone ? 'true' : 'false'} ref={register({ required: true })} name=\"phone\" className=\"strike-adduser__form-input\" placeholder={i18n.t('addUserForm.phone')} />\n                        {/* <div className=\"strike-adduser__form-label\">{i18n.t('addUserForm.isAdmin')}</div> */}\n                        {/* <select className=\"strike-adduser__form-input\">\n                        <option>{i18n.t('addUserForm.true')}</option>\n                        <option>{i18n.t('addUserForm.false')}</option>\n                    </select> */}\n                        <button type=\"submit\" className=\"strike-adduser__form-button\">{i18n.t('users.editUser')}</button>\n                    </form>\n                    <button onClick={delUser} className=\"strike-adduser__form-button\">{i18n.t('users.delete')}</button>\n                </div>\n            </div>\n        </Wrapper>\n    )\n}\n\nconst mapStateToProps = ({ selectedUser }) => ({ selectedUser });\nconst mapDispatchToProps = { updateUser, getUser, deleteUser };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(EditUser));","import React from 'react';\nimport './wrapper.scss';\n\nconst Wrapper = (props) => {\n    return (\n        <div className=\"strike-wrapper\">\n            {props.children}\n        </div>\n    )\n}\n\nexport default Wrapper;","import {\n    GET_ALL_USERS, GET_SELECTED_USER, POST_USER, UPDATE_USER, DELETE_USER, IS_LOGGED_IN, TOGGLE_ERROR_MODAL\n} from '../actionTypes';\nimport axios from 'axios';\n\nexport const getAllUsers = () => async (dispatch) => {\n    try {\n        const { data } = await axios.get(`/users`);\n        if (data.success) {\n            dispatch({ type: GET_ALL_USERS, data: data.data });\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const getUser = (id) => async (dispatch) => {\n    try {\n        const { data } = await axios.get(`/users/${id}`);\n        if (data.success) {\n            dispatch({ type: GET_SELECTED_USER, data: data.data });\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const postUser = (body, history) => async (dispatch) => {\n    try {\n        const { first_name, last_name, email, phone } = body;\n        const { data } = await axios.post(`/users`, { first_name, last_name, email, phone });\n        if (data.success) {\n            dispatch({ type: POST_USER, data: data.data });\n            history.goBack();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const updateUser = (id, body, history) => async (dispatch) => {\n    try {\n        const { first_name, last_name, email, phone } = body;\n        const { data } = await axios.put(`/users/${id}`, { first_name, last_name, email, phone });\n        if (data.success) {\n            dispatch({ type: UPDATE_USER, data: data.data });\n            history.goBack();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport const deleteUser = (id) => async (dispatch) => {\n    try {\n        const { data } = await axios.delete(`/users/${id}`);\n        if (data.success) {\n            window.location.reload();\n        } else if (data.code === 403) {\n            dispatch({ type: IS_LOGGED_IN, data: false });\n            localStorage.removeItem('token');\n            axios.defaults.headers.common['Content-Type'] = \"applicaton/json\"\n            axios.defaults.headers.common['Authorization'] = ``\n        }else{\n            dispatch({ type: TOGGLE_ERROR_MODAL, data: data.message })\n        }\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}"],"sourceRoot":""}